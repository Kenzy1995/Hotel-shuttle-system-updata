:root {
  --fh-blue: #0b63ce;
  --fh-gold: #b98a00;
  --bg-gray: #f5f5f5;
  --line-gray: #e0e0e0;
  --up-bg: #fffbe8;
  --down-bg: #f3f3f3;
}
* { box-sizing: border-box; }

/* Base font size increase */
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: var(--bg-gray);
  color: #222;
  -webkit-font-smoothing: antialiased;
  padding-bottom: 60px;
  font-size: 19px; /* Increased from default 14-16px to ~14pt */
  max-width: 650px; /* Increased by 4 chars (approx 70px) from 580px */
}

/* ===== App Bar ===== */
header {
  display: flex;
  align-items: center;
  padding: 6px 8px;
  background: #ffffff;
  border-bottom: 1px solid #ddd;
  position: sticky;
  top: 0;
  z-index: 20;
}
header .left {
  display: flex;
  align-items: center;
  gap: 8px;
}
header .logo {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  /* border: 2px solid #b22222; Removed border per user request */
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.logo-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
header .title {
  font-weight: 600;
  font-size: 16px;
  white-space: nowrap;
}

header .center {
  flex: 1;
}

.icon-btn {
  border: none;
  background: none;
  font-size: 22px;
  cursor: pointer;
  padding: 4px;
  color: #444;
}


/* Header Right Section Adjustments for Search */
header .right {
  display: flex;
  align-items: center;
  gap: 4px;
  position: relative; /* For search expansion context if needed */
}

/* Expandable Search Box */
.search-container {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  transition: all 0.3s ease;
}

.search-box {
  width: 0;
  opacity: 0;
  overflow: hidden;
  background: #f5f5f5;
  border-radius: 999px;
  display: flex;
  align-items: center;
  border: 1px solid transparent;
  transition: all 0.3s ease;
  position: absolute;
  right: 40px; /* Position to the left of refresh button */
  top: 50%;
  transform: translateY(-50%);
  height: 36px;
  z-index: 25;
}

.search-box.visible {
  width: 200px; /* Expanded width */
  opacity: 1;
  padding: 0 8px;
  border-color: #e0e0e0;
}

.search-trigger-btn {
  font-size: 44px; /* Doubled from 22px */
  padding: 4px;
  background: none;
  border: none;
  cursor: pointer;
  color: #444;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-trigger-btn img {
  width: 36px;
  height: 36px;
}

.search-icon {
  width: 16px;
  height: 16px;
  object-fit: contain;
}
.search-input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 14px;
  outline: none;
  min-width: 0; /* Important for flex child */
  margin-left: 4px;
}
.search-clear {
  border: none;
  background: none;
  cursor: pointer;
  font-size: 14px;
  color: #777;
  padding: 2px 4px;
}

/* Detail Labels Alignment */
.detail-row {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 4px;
}
.detail-label {
  width: 90px; /* Fixed width */
  font-weight: 700;
  color: #000;
  display: flex;
  justify-content: space-between; /* Text left, Colon right */
  flex-shrink: 0;
}
.detail-value {
  flex: 1;
  word-break: break-all;
}

/* Scan overlay unaffected by zoom */
#scan-overlay {
  zoom: 1 !important; /* Force reset zoom */
  font-size: 16px !important; /* Force reset font size */
  padding: 10px;
}

#page-container {
  padding-top: 4px;
}
.tab-page {
  display: none;
  padding: 8px 0 16px;
}
.tab-page.active {
  display: block;
}
.inner-page {
  padding: 0 10px;
}

/* ===== Sidebar ===== */
.sidebar-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 100;
  display: flex;
}
.sidebar-content {
  width: 272px; /* 縮小到85% (320px * 0.85 = 272px) */
  background: #fff;
  height: 100%;
  box-shadow: 2px 0 8px rgba(0,0,0,0.2);
  display: flex;
  flex-direction: column;
}
.sidebar-header {
  padding: 20px 16px;
  background: #fafafa;
  border-bottom: 1px solid #eee;
  display: flex;
  align-items: center;
  gap: 12px;
}
.sidebar-logo {
  width: 40px;
  height: 40px;
  object-fit: contain;
}
.sidebar-title {
  font-weight: 700;
  color: var(--fh-blue);
  font-size: 19px;
}
.sidebar-menu {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 0; /* Remove padding as sections handle it */
  overflow-y: auto;
}
.menu-item {
  padding: 12px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #f0f0f0;
}
.menu-label {
  font-size: 17px;
  font-weight: 500;
}
/* GPS Toggle Switch */
.toggle-switch {
  position: relative;
  width: 40px;
  height: 24px;
}
.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 24px;
}
.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}
input:checked + .slider {
  background-color: var(--fh-blue);
}
input:checked + .slider:before {
  transform: translateX(16px);
}

/* Sidebar Sections */
.menu-section {
  border-bottom: 1px solid #f0f0f0;
}
.section-header {
  padding: 14px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #fff;
  cursor: pointer;
  transition: background 0.2s;
}
.section-header:active {
  background: #f9f9f9;
}
.section-title {
  display: flex;
  align-items: center;
  font-size: 19px;
  font-weight: 600;
  color: #333;
}
.section-content {
  background: #fafafa;
  padding-bottom: 8px;
  border-top: 1px solid #f5f5f5;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.03);
}
.section-content .menu-item {
  border-bottom: none; /* Remove border inside section */
  padding: 10px 20px;
  font-size: 16px;
}
.column-item {
  flex-direction: column;
  align-items: flex-start;
  gap: 8px;
}
.input-row {
  display: flex;
  align-items: center;
  width: 100%;
  gap: 10px;
}
.input-row input {
  flex: 1;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ddd;
  font-size: 16px;
  background: #fff;
}

/* ===== Font Size Settings ===== */
body.font-size-small {
  zoom: 1; /* Was 0.9 */
}
body.font-size-normal {
  zoom: 1.25; /* Was 1.0 */
}
body.font-size-large {
  zoom: 1.5; /* Was 1.1 */
}

.font-size-controls {
  display: flex;
  gap: 8px;
  width: 100%;
}
.fs-btn {
  flex: 1;
  padding: 8px 0;
  border: 1px solid #ddd;
  background: #f9f9f9;
  border-radius: 6px;
  font-size: 14px;
  color: #555;
  cursor: pointer;
}
.fs-btn.active {
  background: var(--fh-blue);
  color: #fff;
  border-color: var(--fh-blue);
  font-weight: 600;
}

/* ===== 班次清單：日期/班次 ===== */
.date-header {
  display: flex;
  align-items: center;
  margin: 6px 10px 4px;
  font-size: 22px;
  color: var(--fh-blue);
  font-weight: 800;
}
.date-header span.count {
  margin-left: 8px;
  font-size: 16px;
  color: #777;
  font-weight: 700;
}
.trip-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 10px;
  margin: 0 10px 4px;
  background: #f7f7f7; /* 極淺灰底提升辨識度 */
  border-radius: 10px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
  cursor: pointer;
}
.trip-left {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.trip-time {
  font-size: 22px;
  font-weight: 800;
}
.trip-right {
  font-size: 14px;
  color: #555;
  white-space: nowrap;
  font-weight: 800;
}

/* ===== 共用表頭 ===== */
.table-header-row {
  display: grid;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 600;
  color: #444;
  background: #fafafa;
  border-bottom: 1px solid var(--line-gray);
}

.no-data {
  margin: 16px 10px;
  font-size: 14px;
  color: #777;
}

/* ===== 班次乘客列表（班次清單 / 最近發車 共用） ===== */
.back-btn {
  color: var(--fh-blue);
  font-size: 14px;
  padding: 6px 10px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}
.trip-header {
  font-size: 24px;
  font-weight: 800;
  margin: 0 10px 8px;
  color: var(--fh-blue);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.trip-main-time { font-size: 22px; font-weight: 800; }
.trip-actions {
  display: inline-flex;
  gap: 12px;
}

.trip-passenger-table-wrap {
  margin-top: 4px;
  /* max-height removed to allow full expansion */
  overflow-x: auto; /* Restore horizontal scrolling */
  padding-bottom: 70px; /* 避免被底部導覽遮住 */
}

/* 彈性欄位：混合 minmax 和 fr 單位 */
.trip-passenger-header,
.passenger-row {
  grid-template-columns: 
    80px    /* 狀態 */
    100px   /* 預約編號 */
    60px    /* 上下 */
    100px   /* 房號 +1字幅 */
    160px   /* 姓名 +2字幅 */
    100px   /* 人數 +2字幅 */
    120px;  /* 手機 */
  margin: 0 10px;
  font-size: 19px; /* Increased from 12px */
  min-width: 1040px; /* 整體 +3字幅 (~60px) */
}

.trip-passenger-header {
  display: grid;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  font-size: 20px; /* Header larger than content */
  font-weight: 700;
  color: #444;
  background: #fafafa;
  border-bottom: 1px solid var(--line-gray);
  border-radius: 10px 10px 0 0;
  position: sticky;
  top: 0;
  z-index: 5;
}

.passenger-row {
  display: grid;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  margin: 0 10px;
  background: #ffffff;
  border-bottom: 1px solid #eee;
  font-size: 19px; /* Increased */
  cursor: pointer;
  font-weight: 600;
}


.passenger-row.row-up {
  background: var(--up-bg);
}
.passenger-row.row-drop-off {
  background: #e0e0e0; /* Light Gray */
  text-decoration: line-through;
  color: #777;
}
.passenger-row.row-drop-off .p-booking,
.passenger-row.row-drop-off .p-room,
.passenger-row.row-drop-off .p-name,
.passenger-row.row-drop-off .p-updown,
.passenger-row.row-drop-off .p-status-tag {
  /* Inherit text decoration from row */
}

/* Removed old row-down specific selectors to rely on container */

.station-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  margin: 10px 10px 0;
  padding: 6px 10px;
  background: #eef4ff;
  border-radius: 6px;
  font-size: 22px; /* Increased from 15px */
  font-weight: 800;
  color: var(--fh-blue);
}
.station-header span.count {
  font-size: 18px; /* Slightly larger */
  color: #555;
}

.p-status-tag {
  font-size: 14px; /* Increased from 11px */
  color: #aaa;
  font-weight: 500;
  display: inline-block;
}
.p-status-tag:empty {
  opacity: 0.3;
}
.p-status-tag.ok {
  background-color: #28a745; /* Green background */
  color: #ffffff; /* White text */
  font-weight: 700;
  border-radius: 999px; /* Pill shape */
  padding: 2px 8px; /* Padding for the pill */
  font-size: 13px;
  line-height: 1.4;
}
.p-status-tag.drop-off {
  background-color: #666666; /* Darker Gray */
  color: #ffffff; /* White text */
  font-weight: 700;
  border-radius: 999px; /* Pill shape */
  padding: 2px 8px; /* Padding for the pill */
  font-size: 13px;
  line-height: 1.4;
  text-decoration: none; /* Ensure text inside tag is not struck through if possible, or override */
  display: inline-block; /* Ensure block formatting */
}
.p-booking { 
  font-weight: 700; 
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.p-updown { 
  color: #555;
  text-align: center;
}
.p-room { 
  color: #555;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.p-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.p-pax {
  text-align: center;
}
.p-phone {
  text-align: center;
  min-width: 50px;
}
.p-phone a {
  text-decoration: none;
  font-size: 16px;
  color: #444;
  display: inline-block;
  padding: 2px;
}

/* ===== 詳細資料卡 ===== */
#detail-overlay .detail-card {
  font-size: 20px;
}
#detail-overlay .detail-title {
  font-size: 22px;
  font-weight: 800;
}
#detail-overlay .detail-row {
  font-size: 20px;
}
#detail-overlay .detail-label {
  font-weight: 700;
}

/* ===== 乘客清單（全部） ===== */
.all-passenger-wrap {
  /* max-height removed */
  overflow-x: auto; /* Restore horizontal scrolling */
  padding-bottom: 4px;
}
.all-passenger-header,
.all-passenger-row {
  /* 9 columns: Booking, Name, Room, Pax, HotelGo, MRT, Train, Mall, HotelBack */
  grid-template-columns: 140px 200px 170px 70px 130px 130px 130px 160px 130px; /* 依字幅需求全面加寬 */
  min-width: 1320px; /* 整體增加6字幅 (~120px) */
}
.all-passenger-header > div,
.all-passenger-row > div {
  white-space: nowrap;
}
.all-passenger-wrap {
  padding-bottom: 70px; /* 避免被底部導覽遮住 */
}

.all-passenger-header {
  display: grid;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  font-size: 20px; /* Header */
  font-weight: 700;
  color: #444;
  background: #fafafa;
  border-bottom: 1px solid var(--line-gray);
  margin: 0 10px;
  border-radius: 10px 10px 0 0;
  position: sticky;
  top: 0;
  z-index: 5;
}
.all-passenger-row {
  display: grid;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  margin: 0 10px;
  background: #ffffff;
  border-bottom: 1px solid #eee;
  font-size: 19px; /* Content */
  cursor: pointer;
}
.all-passenger-row:nth-of-type(even) {
  background: #fafafa;
}
.col-center {
  text-align: center;
}
.all-trip-header {
  display: flex;
  align-items: center;
  margin: 10px 10px 4px;
  font-size: 22px; /* Increased from 14px per user request */
  font-weight: 800; /* Increased weight */
  color: var(--fh-blue);
}
.all-trip-header span.count {
  margin-left: 8px;
  font-size: 16px;
  color: #777;
}

/* ===== Bottom Nav ===== */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 72px;
  background: #ffffff;
  border-top: 1px solid #ddd;
  display: flex;
  z-index: 30;
}
.nav-btn {
  flex: 1;
  border: none;
  background: none;
  font-size: 18px; /* 放大分頁字體 */
  font-weight: 700;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  color: #444;
  cursor: pointer;
  transition: box-shadow 1s ease, border-color 1s ease;
}
.nav-btn:active { box-shadow: 0 0 0 2px rgba(0,0,0,0.12) inset; border-color: #ccc; }
.nav-icon {
  width: 36px;
  height: 36px;
  object-fit: contain;
}
.nav-btn.active {
  font-weight: 800;
  color: #A78873;
}

/* 最近發車右下角掃描按鈕 */
.floating-scan-btn {
  position: fixed;
  bottom: 96px;
  right: 16px;
  width: 65px;
  height: 65px;
  border-radius: 12px;
  border: none;
  background: #FFC0CB;
  opacity: 0.35;
  box-shadow: 0 3px 8px rgba(0,0,0,0.35);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 31;
  cursor: pointer;
}
.floating-scan-icon {
  width: 50px;
  height: 50px;
  object-fit: contain;
}

/* ===== 掃描覆蓋層 ===== */
#scan-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6); /* More transparent (was 0.85) */
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 40;
  color: #ffffff;
  padding: 16px;
}
#qr-reader {
  width: 280px;
  max-width: 100%;
}
#scan-message {
  margin-top: 12px;
  font-size: 14px;
  text-align: center;
}
.btn {
  padding: 8px 16px;
  border-radius: 999px;
  border: none;
  background: var(--fh-blue);
  color: #ffffff;
  font-size: 14px;
  cursor: pointer;
  margin-top: 10px;
}
.tip {
  margin-top: 6px;
  font-size: 11px;
  color: #ccc;
  text-align: center;
}

/* 手電筒按鈕 */
#btn-torch {
  position: absolute;
  top: 12px;
  left: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: none;
  background: rgba(0,0,0,0.4);
  color: #fff;
  font-size: 14px;
  cursor: pointer;
}

/* ===== 成功提示 ===== */
#success-toast {
  position: fixed;
  top: 30%;
  left: 50%;
  transform: translateX(-50%);
  padding: 16px 20px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
  display: none;
  z-index: 50;
  text-align: center;
  min-width: 220px;
}
#success-toast .check {
  font-size: 40px;
  color: #4caf50;
  margin-bottom: 4px;
}
#success-toast .name {
  font-weight: 600;
  margin-bottom: 2px;
}
#success-toast .info {
  font-size: 13px;
  color: #555;
}

/* Splash Screen */
#splash-screen {
  position: fixed;
  inset: 0;
  background: #ffffff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.splash-logo {
  width: 120px;
  height: 120px;
  object-fit: contain;
  margin-bottom: 20px;
}
.splash-text {
  font-size: 18px;
  color: #444;
  font-weight: 600;
  animation: pulse 1.5s infinite;
}

/* Refresh Overlay */
#refresh-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 100vh;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 900;
}
.refresh-content {
  background: #fff;
  padding: 20px 30px;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
.refresh-spinner {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #b98a00;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse {
  0% { opacity: 0.6; }
  50% { opacity: 1; }
  100% { opacity: 0.6; }
}

/* ===== 詳細資料 overlay ===== */
#detail-overlay,
#checkin-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 45;
  padding: 16px;
}

.detail-card,
.checkin-card {
  background: #ffffff;
  border-radius: 12px;
  max-width: 420px;
  width: 100%;
  max-height: 90vh;
  overflow: auto;
  padding: 14px 16px 12px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}
.detail-title,
.checkin-title {
  font-size: 15px;
  font-weight: 700;
  margin-bottom: 8px;
  color: var(--fh-blue);
}
.detail-row {
  display: flex;
  font-size: 13px;
  margin: 2px 0;
}
.detail-label {
  width: 90px;
  color: #666;
  font-weight: 600;
}
.detail-value {
  flex: 1;
}
.detail-close {
  margin-top: 10px;
  text-align: right;
}
.detail-close button,
.checkin-actions button {
  padding: 6px 14px;
  border-radius: 999px;
  font-size: 16px;
  cursor: pointer;
}
.detail-close button,
.btn-primary {
  border: none;
  background: var(--fh-blue);
  color: #fff;
}
.btn-secondary {
  border: 1px solid #ccc;
  background: #f7f7f7;
  color: #333;
}
.checkin-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 10px;
}

.cell-up {
  background: #ffeb80; /* 黃底 */
  color: #111;         /* 黑字 */
  padding: 2px 6px;
  border-radius: 6px;
  font-weight: 800;
}
.cell-down {
  background: #f0f0f0; /* 微灰底 */
  color: #111;         /* 黑字 */
  padding: 2px 6px;
  border-radius: 6px;
  font-weight: 700;
}

/* ===== 手機版特別調整 ===== */
@media (max-width: 768px) {
  .trip-passenger-header,
  .passenger-row {
    min-width: 400px;
  }
  .station-header {
    min-width: 400px;
  }
}

/* ===== 桌面版媒體查詢 ===== */
@media (min-width: 768px) {
  body {
    max-width: 650px;
    margin: 0 auto;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
  }
  .bottom-nav {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    width: 580px;
  }
  .floating-scan-btn {
    right: calc(50% - 580px/2 + 16px);
  }
  #scan-overlay,
  #detail-overlay,
  #checkin-overlay,
  #success-toast {
    left: 50%;
    right: auto;
    width: 580px;
    margin: 0 auto;
    transform: translateX(-50%);
  }
}

/* Permission Modal */
.permission-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

/* Sidebar subtitle */
.sidebar-subtitle {
  padding: 6px 16px;
  font-size: 12px;
  color: #777;
  border-bottom: 1px solid #f0f0f0;
}

/* Detail labels alignment */
.detail-row {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}
.detail-label {
  min-width: 110px;
  font-weight: 700;
  color: #000;
  text-align: right;
}
.detail-value {
  flex: 1;
}

/* Scan overlay unaffected by zoom */
#scan-overlay {
  zoom: 1;
  padding: 10px;
}
#qr-reader {
  max-width: 360px;
  width: 100%;
  aspect-ratio: 1 / 1;
}
#scan-message {
  margin-top: 10px;
  font-size: 14px;
}
.permission-modal {
  background: #fff;
  border-radius: 16px;
  width: 100%;
  max-width: 340px;
  padding: 24px 20px;
  text-align: center;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}
.pm-icon {
  width: 60px;
  height: 60px;
  background: #f0f4ff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
}
.pm-icon img {
  width: 36px;
  height: 36px;
  object-fit: contain;
}
.pm-title {
  font-size: 20px;
  font-weight: 700;
  color: #333;
  margin-bottom: 12px;
}
.pm-desc {
  font-size: 14px;
  color: #666;
  text-align: left;
  line-height: 1.5;
  margin-bottom: 24px;
}
.pm-desc ul {
  padding-left: 20px;
  margin: 10px 0 0;
}
.pm-desc li {
  margin-bottom: 8px;
}
.pm-btn {
  width: 100%;
  padding: 12px;
  background: var(--fh-blue);
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}
/* Custom Header */
.custom-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  height: 56px; /* 縮小一半 */
  background: #ffffff;
  border-bottom: 1px solid #eee;
}
.custom-header .left,
.custom-header .center,
.custom-header .right {
  display: flex;
  align-items: center;
}
.custom-header .logo-img {
  height: 28px; /* 對應較小橫幅 */
  width: auto;
}
.custom-header .search-box {
  height: 36px;
  display: flex;
  align-items: center;
  background: #f7f7f7;
  border-radius: 8px;
  padding: 0 8px;
  max-width: min(480px, 70vw); /* 不超過螢幕寬度 */
}
.custom-header .search-input {
  height: 32px;
  font-size: 14px;
  max-width: min(440px, 62vw);
}
.custom-header .icon-btn {
  font-size: 20px;
}

/* Checkin Modal Buttons Larger */
.checkin-actions .btn-primary,
.checkin-actions .btn-secondary {
  font-size: 18px;
  padding: 12px 18px;
}
.checkin-actions {
  display: flex;
  justify-content: space-between;
}
/* ===== Action Buttons (Start/End) ===== */
.action-btn {
  border: none;
  border-radius: 16px;
  padding: 8px 16px;
  font-size: 16px;
  font-weight: 800;
  cursor: pointer;
  transition: transform 0.05s ease, box-shadow 0.2s ease;
}
.action-btn.large { padding: 16px 32px; font-size: 20px; }
.action-btn:active { transform: scale(0.98); }
.action-btn--start { background: #2ecc71; color: #fff; border: 1px solid #2ecc71; }
.action-btn--end { background: #FFC0CB; color: #700; border: 1px solid #f1a9bc; }

/* Rounded utility */
.rounded-btn {
  border: none;
  border-radius: 14px;
  padding: 8px 14px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
}
.rounded-btn.gray { background: #ddd; color: #333; }
.rounded-btn.yellow { background: #f5d36b; color: #664d00; }

/* ===== Modal Buttons (Unified) ===== */
.modal-btn { 
  border: none; 
  border-radius: 14px; 
  padding: 10px 18px; 
  font-size: 16px; 
  font-weight: 700; 
  cursor: pointer; 
}
.modal-btn.primary { background: #0b63ce; color: #fff; }
.modal-btn.secondary { background: #ddd; color: #333; }
.modal-btn.danger { background: #ffb3b3; color: #700; }

/* Green button utility */
.btn-green {
  background: #2ecc71;
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  padding: 6px 12px;
  cursor: pointer;
}

/* ===== Header cell separators ===== */
.table-header-row > div {
  border-right: 1px solid #eee;
}
.table-header-row > div:last-child { border-right: none; }
/* ===== Role selection buttons ===== */
.role-btn {
  border: 2px solid transparent;
  border-radius: 14px;
  padding: 10px 16px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
}
.role-btn.selected {
  border-color: #0b63ce;
  box-shadow: 0 0 0 2px rgba(11,99,206,0.15);
}
.role-btn.gray { background: #eee; color: #333; }
.role-btn.yellow { background: #f5d36b; color: #664d00; }

/* ===== Date headers (group labels) ===== */
.date-header {
  font-size: 22px;
  font-weight: 800;
  color: var(--fh-blue);
  margin: 10px;
}
.all-trip-header {
  font-size: 22px;
  font-weight: 800;
  color: var(--fh-blue);
  margin: 8px 10px;
}
#splash-screen {
  position: fixed;
  inset: 0;
  background: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1100;
}
.splash-logo { width: 120px; height: 120px; transition: transform 0.4s ease, opacity 0.4s ease; }
.splash-text { margin-top: 10px; color: var(--fh-blue); font-weight: 800; }
.splash-fade .splash-logo.zoom-out { transform: scale(1.25); opacity: 0; }
#checkin-overlay { position: fixed; inset: 0; z-index: 100000; }
.permission-modal-overlay { z-index: 100000; }
.recent-main-time-card {
  background: #f5d36b;
  color: #664d00;
  font-weight: 800;
  font-size: 24px;
  padding: 6px 12px;
  border-radius: 12px;
  display: inline-block;
  border: 1px solid #e8dcae;
}
.recent-label {
  font-size: 14px;
  margin-right: 4px;
}
.bottom-banner-toast {
  --background: #2ecc71;
  --color: #fff;
  --width: 100vw;
  --max-width: 100vw;
  --margin-start: 0;
  --margin-end: 0;
  --border-radius: 0;
  --offset-bottom: 72px;
  --padding-start: 0;
  --padding-end: 0;
  text-align: center;
}
ion-toast.bottom-banner-toast::part(container) { left: 0; right: 0; transform: none; margin: 0 auto; padding: 0; width: 100vw; max-width: 100vw; }
ion-toast.bottom-banner-toast::part(message) { font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: center; margin: 0; font-size: 1.1em; }
.center-toast { --max-width: 80%; }
.bottom-nav .nav-btn span { font-size: 19px; font-weight: 700; }
.action-btn,
.rounded-btn,
.modal-btn {
  transition: box-shadow 1s ease, border-color 1s ease;
}
.action-btn:active,
.rounded-btn:active,
.modal-btn:active {
  box-shadow: 0 0 0 2px rgba(0,0,0,0.12) inset;
  border-color: #ccc;
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
.all-passenger-row.row-drop-off {
  background: #e0e0e0;
  text-decoration: line-through;
  color: #777;
}
@keyframes exitPulse {
  0% { transform: scale(0.85); opacity: 0; }
  15% { transform: scale(1.05); opacity: 1; }
  70% { transform: scale(1.05); opacity: 1; }
  100% { transform: scale(0.85); opacity: 0; }
}
